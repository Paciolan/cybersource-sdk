# Cybersource SDK for NodeJS

A modern fork of Cybersource's official Node SDK — generated from Cybersource's own API source code

## Motivation

Tl;dr — Cybersource's official SDK generated using a newer (Typescript compatible) version of [Swagger Codegen](https://github.com/swagger-api/swagger-codegen).

Cybersource's official NodeJS SDK is automatically generated using Swagger Codegen v2.3.0. Cybersource feeds the code generator a [swagger 2.0 specification file](https://raw.githubusercontent.com/CyberSource/cybersource-rest-client-node/master/generator/cybersource-rest-spec.json) generated from their API's source code.

Unfortunately v2.3 of Swagger Codegen does not support Typescript, and is clearly copied from the Java code generator, resulting in an unintuitive and clunky user experience. This project feeds the same swagger 2.0 specification file into a newer Typescript-compatible version of Swagger Codegen (v3.0.43).

This results in a strongly typed SDK which reflects the types generated by Cybersource's offical API source code; no room for human error.

## Differences

The overall functionality of the new SDK should remain similar to the old SDK since they are both generated using the same OpenAPI specification file.

TODO: Logging? Doesn't require logging settings to be set up.

TODO: Doesn't support some authentication methods. We should list which ones.

HTTP library has been switched from \_\_\_ to Axios.

Many endpoints now return Promises instead of error-first callbacks.

## Usage

While Cybersource's official examples likely won't work as-is, the method names should remain the same and the added types should provide the necessary information to determine which parameters methods should be called with and what data the methods return. We encourage you to still view [Cybersource's official documentaion for SDK usage](https://github.com/CyberSource/cybersource-rest-client-node/tree/master), but know that the method signatures may have changed slightly.

Example usage can be found in the [payment-ms's CybersourceClientApiWrapper](https://gitlabdev.paciolan.info/development/application/payment/payment-ms/-/blob/chore/no-implicit-any/src/processors/cybersource/cybersource-client-api-wrapper.ts).

### Installation

```
$ npm install @paciolan/cybersource-sdk
```

### Example Payment

```typescript
import { PaymentsApi, V2PaymentsBody } from "@paciolan/cybersource-sdk";
const requestBody: V2PaymentsBody = {
  paymentInformation: {
    card: {
      number: "4242424242424242",
      expirationMonth: "09",
      expirationYear: "24",
    },
  },
  orderInformation: {
    amountDetails: {
      currency: "USD",
      totalAmount: "123.45",
    },
  },
};
const apiResponse = await PaymentsApi.createPayment(requestBody, merchantConfig);
```

### Globally Exported Members

- `BASE_PATH` (Previously `new require('cybersource-rest-client').ApiClient().basePath`)

## Maintainers

TODO: Which code should you edit, and how?

TODO: How to re-generate and update this repository (if you made code changes)

TODO: How to update swagger codegen version

TODO: How to pull in the latest spec file from the official Cybersource SDK
